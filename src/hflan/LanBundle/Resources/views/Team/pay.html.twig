{% extends 'hflanLanBundle:Team:layout.html.twig' %}

{% block content %}
    {% set numberOfMinor = 0 %}
    {% for player in team.players if player.isMinor %}
        {% set numberOfMinor = numberOfMinor + 1 %}
    {% endfor %}

    {% if numberOfMinor > 0 %}
        <div class="flash flash-warning" style="margin-top: 20px">
            {{ renderBlock('registration_minor') }}
        </div>
    {% endif %}

    {% if team.paid %}
        {% if not tournament.isPaymentOnTheSpot %}
            {{ renderBlock("registration_complete") }}
        {% else %}
            {{ renderBlock("registration_complete_on_the_spot") }}
        {% endif %}
    {% else %}
        {% if tournament.fillingRatio < 100 %}
            {% if not tournament.isPaymentOnTheSpot %}
                {{ renderBlock("registration_buy_instruction") }}

                <form action="" method="POST">
                    <script
                        src="https://checkout.stripe.com/checkout.js" class="stripe-button"
                        data-key="pk_test_1DHSFOydaonR4rqGHldlc4EO"
                        data-amount="{{ tournament.totalPrice *100 }}"
                        data-name="{{ tournament.event }}"
                        data-description="{{ tournament }}"
                        data-currency="eur"
                        data-image="/128x128.png">
                    </script>
                </form>

                
            {% else %}
                {{ renderBlock("registration_complete_on_the_spot") }}
            {% endif %}
        {% else %}
            {{ renderBlock("registration_tournament_full") }}
        {% endif %}
    {% endif %}

{% endblock %}
